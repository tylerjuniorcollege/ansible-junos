---
- name: upgrade junos
  hosts: AnsibleTest
  connection: local
  gather_facts: no

  vars: 
    ansible_connection: netconf
    ansible_python_interpreter: "{{ '/usr/bin/env python-docker' }}"
    ansible_command_timeout: 60
    
  tasks:

  - set_fact:
      ansible_python_interpreter: '{{ ansible_playbook_python }}'
    delegate_to: localhost    
    delegate_facts: true

  - name: install local package on remote device and reboot the device
    junos_package:
      src: "{{playbook_dir}}/jinstall-ex-4200-12.3R12.4-domestic-signed.tgz"
      reboot: true
      provider: "{{ credentials }}"
      version: 12.3R12.4
