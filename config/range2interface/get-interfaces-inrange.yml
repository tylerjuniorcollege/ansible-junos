---
- name: Get Interfaces in Interface Ranges
  hosts: Junos_Test
  gather_facts: no
  roles:
    - Juniper.junos
  tasks:
    - name: Get Interfaces in Interface Ranges from config
      juniper_junos_command:
        formats: text
        commands:
          - "show configuration interfaces interface-range {{ range | mandatory }}"
      register: dirtyInterfaces
    
    # example regex_findall('\\b(?:[0-9]{1,3}\\.){3}[0-9]{1,3}\\b')
    # interface example ge-0/0/1
    - name: Grab interfaces from getInterfaceRangeResults
      set_facts:
        cacheable: false
        dirtyInterfaces: "{{ dirtyInterfaces.stdout_lines | regex_findall('ge-[0-9]\/[0-9]\/[0-9]', ignorecase=True) }}"
      register: cleanInterfaces
      
      
    - name: print dirtyInterfaces.stdout_lines
      debug:
        var: dirtyInterfaces.stdout_lines
    - name: print cleanInterfaces.stdout_lines
      debug:
        var: cleanInterfaces.stdout_lines
