- name: load configure file into device
  junipernetworks.junos.junos_config:
    src: srx.cfg
    comment: update config

- name: load configure lines into device
  junipernetworks.junos.junos_config:
    lines:
    - set interfaces ge-0/0/1 unit 0 description "Test interface"
    - set vlans vlan01 description "Test vlan"
    comment: update config

- name: Set routed VLAN interface (RVI) IPv4 address
  junipernetworks.junos.junos_config:
    lines:
    - set vlans vlan01 vlan-id 1
    - set interfaces irb unit 10 family inet address 10.0.0.1/24
    - set vlans vlan01 l3-interface irb.10

- name: Check correctness of commit configuration
  junipernetworks.junos.junos_config:
    check_commit: yes

- name: rollback the configuration to id 10
  junipernetworks.junos.junos_config:
    rollback: 10

- name: zero out the current configuration
  junipernetworks.junos.junos_config:
    zeroize: yes

- name: Set VLAN access and trunking
  junipernetworks.junos.junos_config:
    lines:
    - set vlans vlan02 vlan-id 6
    - set interfaces ge-0/0/6.0 family ethernet-switching interface-mode access vlan
      members vlan02
    - set interfaces ge-0/0/6.0 family ethernet-switching interface-mode trunk vlan
      members vlan02

- name: confirm a previous commit
  junipernetworks.junos.junos_config:
    confirm_commit: yes

- name: for idempotency, use full-form commands
  junipernetworks.junos.junos_config:
    lines:
      # - set int ge-0/0/1 unit 0 desc "Test interface"
    - set interfaces ge-0/0/1 unit 0 description "Test interface"

- name: configurable backup path
  junipernetworks.junos.junos_config:
    src: srx.cfg
    backup: yes
    backup_options:
      filename: backup.cfg
      dir_path: /home/user
Return Values
