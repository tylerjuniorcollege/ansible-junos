---
- name: Status of EX3400 Deployment
  hosts:
    - EX3400-R
    - EX3400
    - EX4600
  roles:
    - Juniper.junos
  connection: local
  gather_facts: no

  vars:
    device_info: "{{ sys_hostname }} :: {{ ansible_host }} :: {{ device_roll }}"
    ansible_user: "ansible"
    connection_settings:
      host: "{{ ansible_host }}"
      port: 22
      timeout: 180

  tasks:
    - name: Target Devices
      debug:
        var: device_info

    - name: Poll Device Details
      juniper_junos_facts:
        provider: "{{ connection_settings }}"

    - name: Display Device Details
      debug:
        msg: "Name: {{ junos.hostname }} - Serial Number: {{ junos.serialnumber }} - Model: {{ junos.model }} - Version: {{ junos.version }} - Uptime: {{ junos.RE0.up_time }}"
