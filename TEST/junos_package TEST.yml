---
- name: upgrade junos
  hosts: AnsibleTest
  gather_facts: no

  vars: 
    ansible_connection: netconf
    ansible_python_interpreter: "{{'usr/local/lib/python3.6/site-packages/junos_eznc-2.5.3-py3.7-nspkg.pth'}}"
    ansible_command_timeout: 60
    
  tasks:

  - set_fact:
      ansible_python_interpreter: '{{ ansible_playbook_python }}'
    delegate_to: localhost    
    delegate_facts: true

  - name: install local package on remote device and reboot the device
    junos_package:
      src: var/lib/awx/projects/playbooks/junos-arm-32-20.2R1-S2.1.tgz
      reboot: true
      version: 20.2R1-S2.1
