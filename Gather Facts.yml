---
- name: Gather juniper_junos_facts
  hosts:
    - Junos_all

  roles:
  -Juniper.junos
  connection: local
  gather_facts: no

  vars:
    device_info: "{{ sys_hostname }} :: {{ ansible_host }} :: {{ device_roll }}"
    ansible_user: "ansible"
    connection_settings:
      host: "{{ ansible_host }}"
      port: 22
      timeout: 180

  tasks:
    - name: Target Devices
      debug:
        var: device_info

    name: Poll Device Details
      juniper.junos.facts:
        #provider: "{{ connection_settings }}"

    - name: Display Device Details
      debug:
        msg: "Name: {{ junos.hostname }} - Serial Number: {{ junos.serialnumber }} - Model: {{ junos.model }} - Version: {{ junos.version }} - Uptime: {{ junos.RE0.up_time }}"
